// components/HelpModal.jsx
import React, { useState } from 'react';
import './HelpModal.css';

const HelpModal = () => {
  const [open, setOpen] = useState(false);

  return (
    <>
      <button className="help-button" onClick={() => setOpen(true)}>
        <span className="help-button-text">ヘルプ</span>
      </button>
      {open && (
        <div className="modal-overlay" onClick={() => setOpen(false)}>
          <div className="modal-content" onClick={e => e.stopPropagation()}>
            <h2>トレイルランニングシミュレータの使い方</h2>
            <p>
              このシミュレータは、あなたの走力とこれから走るコースの情報（距離・高低差など）をもとに、各地点までの所要時間を予測します。
              到達時間がわかることで、レースに設定された関門とのタイム差を把握でき、無理のない計画やペース配分に役立ちます。
              事前に余裕を持った計画を立てておくことで、レース中も自然の風景や自分自身の走りを楽しむ心のゆとりが生まれます。
              関門突破の可能性や、補給・休憩の見直しにも役立ちます。楽しく完走するためのサポートツールとして、ぜひこのシミュレータをご活用ください。
            </p>
            <ol>
              <li>
                <strong>レース開始時間、制限時間：</strong>
                大会案内等で公開される、レース開始と終了（制限）時間を HH:MM 形式で入力します。
              </li>
              <li>
                <strong>ITRAパフォーマンスインデックス：</strong>
                あなたの走力を数値化したスコア。レースの持久力の補正に使われます。
              </li>
              <li>
                <strong>フルマラソン完走予想時間：</strong>
                平地でのフルマラソン完走予想時間を入力し、「ペースを計算」ボタンを押すと、1kmあたりの基準ペースが算出されます。
                これを元に走力を自動調整します。シミュレーションの結果、関門に間に合わないような場合は、完走タイムを速めにしてみてください。そのかわりレース本番では普段より速く走る努力をしてください
              </li>
              <li>
                <strong>シミュレーション実行：</strong>
                これまで入力した情報（レース開始時間、フルマラソン完走予想時間、ITRAインデックスなど）をもとに、各地点（エイド、関門、山頂など）への到達予想時刻を計算します。
                コース上の距離や高低差に応じて、平地・登り・下りの所要時間を補正しながら、順を追ってシミュレートを進めます。
                その結果として、各地点の通過時刻、関門時間との余裕、合計所要時間などが画面に表示されます。
                レース戦略やペース配分の見直しに活用してください。
                
              </li>
            </ol>
            <h3>補足・注意点</h3>
            <ul>
              <li>時間はすべて24時間表記で入力してください（例: 09:00、15:30）</li>
              <li>「ペースを計算」しないと「シミュレーション実行」はできません</li>
              <li>シミュレーションの結果、獲得標高が大会サイトで公表されているものと大きく異なる場合は、シミュレーションがうまくできていない可能性があります。その場合には、他のGPXファイルをインポートしてみてください。</li>
            </ul>
            <p>
              本シミュレータはあくまで参考情報として提供しております。これらをもとにレースへの参加の可否を判断される際は、ご自身の状況や判断を最優先にしてください。最終的な決定はご自身の責任でお願いいたします。
            </p>
            <button onClick={() => setOpen(false)}>閉じる</button>
          </div>
        </div>
      )}
    </>
  );
};

export default HelpModal;
